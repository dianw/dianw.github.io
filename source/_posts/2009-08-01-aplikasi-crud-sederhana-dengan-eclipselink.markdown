---
layout: post
title: Aplikasi CRUD Sederhana dengan EclipseLink
comments: true
---
Seperti janji saya kemarin (mungkin dulu), kali ini saya akan membahas mengenai proses CRUD dengan EclipseLink karena pada postingan saya yang terdahulu (nggak dulu-dula amat ah….) hanya membahas mengenai inisialisasi EntityManagerFactory.
Sedikit penjelasan mengenai bahasan kali ini yaitu seperti namanya CRUD merupakan proses Create, Read, Update, dan Delete suatu data ke dalam database. Mohon maaf karena kali ini saya hanya akan membahas Create-nya saja.
Ok langsung saja saya jelaskan ……
Pertama buat entity class kemudian buat konfigurasi persistence nya, untuk mempersingkat waktu silakan lihat di sini. Anda bisa memilih menggunakan persistence.xml ataupun Spring. Dalam contoh kali ini saya kan menggunakan Spring untuk inisialisasi EntityManagerFactory-nya.
Dan berikut ini script-nya
<pre style="border-right: #cecece 1px solid; padding-right: 5px; border-top: #cecece 1px solid; padding-left: 5px; min-height: 40px; padding-bottom: 5px; overflow: auto; border-left: #cecece 1px solid; width: 550px; padding-top: 5px; border-bottom: #cecece 1px solid; background-color: #fbfbfb"><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0">  1: <span style="color: #0000ff">package</span> nagasakti.crud;</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff">  2: </pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0">  3: <span style="color: #0000ff">import</span> javax.persistence.EntityManager;</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff">  4: <span style="color: #0000ff">import</span> javax.persistence.EntityManagerFactory;</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0">  5: <span style="color: #0000ff">import</span> nagasakti.entity.Siswa;</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff">  6: <span style="color: #0000ff">import</span> org.springframework.context.ApplicationContext;</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0">  7: <span style="color: #0000ff">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;<span style="color: #0000ff">public</span> <span style="color: #0000ff">class</span> Main {</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff">  8:     <span style="color: #0000ff">private</span> ApplicationContext app;</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0">  9:     <span style="color: #0000ff">private</span> EntityManagerFactory emf;</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff"> 10:     <span style="color: #0000ff">private</span> EntityManager em;</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0"> 11: </pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff"> 12:     <span style="color: #0000ff">public</span> Main() {</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0"> 13:         app = <span style="color: #0000ff">new</span> ClassPathXmlApplicationContext("<span style="color: #8b0000">applicationContext-EclipseLink.xml</span>");</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff"> 14:         emf = (EntityManagerFactory) app.getBean("<span style="color: #8b0000">myEntityManagerFactory</span>");</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0"> 15:         em  = emf.createEntityManager();</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff"> 16:     }</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0"> 17: </pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff"> 18:     <span style="color: #0000ff">public</span> <span style="color: #0000ff">void</span> save(Siswa siswa) {</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0"> 19:         em.getTransaction().begin();</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff"> 20:         em.persist(siswa);</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0"> 21:         em.getTransaction().commit();</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff"> 22:     }</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0"> 23: </pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff"> 24:     <span style="color: #0000ff">public</span> <span style="color: #0000ff">static</span> <span style="color: #0000ff">void</span> main(String[] args) {</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0"> 25:         Siswa sis = <span style="color: #0000ff">new</span> Siswa();</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff"> 26: </pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0"> 27:         sis.setName("<span style="color: #8b0000">Kampret</span>");</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff"> 28:         sis.setAge("<span style="color: #8b0000">14</span>");</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0"> 29: </pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff"> 30:         Main main = <span style="color: #0000ff">new</span> Main();</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0"> 31:         main.save(sis);</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #ffffff"> 32:     }</pre><pre style="font-size: 12px; margin: 0em; width: 100%; font-family: consolas,'Courier New',courier,monospace; background-color: #f0f0f0"> 33: }</pre></pre>
Bisa kita lihat dari baris kode diatas, inisialisasi EntityManager berada pada constructor dari class Main, sedangkan proses save data berada pada method save(). Ketika kode diatas dijalankan lihatlah keajaiban yang terjadi, secara otomatis akan terbentuk sebuah table dengan nama siswa serta di dalamnya sudah terisi satu record dengan value “Kampret, 14”. Dari contoh diatas kita bisa lihat betapa mudahnya mengimplementasikan orm pada aplikasi yang kita buat. Monggo dicoba ……..